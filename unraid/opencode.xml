<?xml version="1.0"?>
<Container version="2">
  <Name>opencode</Name>
  <Repository>ghcr.io/thesammykins/opencode-unraid:latest</Repository>
  <Registry>https://github.com/thesammykins/opencode-unraid/pkgs/container/opencode-unraid</Registry>
  <Network>bridge</Network>
  <Privileged>false</Privileged>
  <Shell>bash</Shell>
  
  <Support>https://github.com/thesammykins/opencode-unraid/issues</Support>
  <Project>https://github.com/sst/opencode</Project>
  <Overview>
OpenCode/Shuvcode is an open-source AI coding agent that provides a headless API server for AI-assisted development.

This container runs in headless serve mode by default, allowing other OpenCode clients (desktop app, CLI, or web) to connect to it. Optionally enable a built-in web UI on a separate port.

Key Features:
- Headless API server for remote OpenCode clients
- Optional web UI on separate port (enable with ENABLE_WEB_UI=true)
- Switch between mainline OpenCode or Shuvcode fork
- Multi-provider support (Anthropic, OpenAI, Google, Azure, local models)
- Built-in development environment with Node.js, Python, git
- Persistent configuration and session history
- Auto-update with session-aware restart
- Install custom packages at runtime

After installation, connect using the OpenCode desktop app or enable the web UI.
  </Overview>
  <Category>Productivity: Tools:</Category>
  <WebUI>http://[IP]:[PORT:4097]</WebUI>
  <TemplateURL>https://raw.githubusercontent.com/thesammykins/opencode-unraid/main/unraid/opencode.xml</TemplateURL>
  <Icon>https://raw.githubusercontent.com/sst/opencode/main/www/public/favicon.svg</Icon>
  <Date>2026-01-05</Date>
  
  <ExtraParams>--restart unless-stopped</ExtraParams>

  <Config 
    Name="API Server Port" 
    Target="4096" 
    Default="4096" 
    Mode="tcp" 
    Description="Headless API server port for OpenCode clients" 
    Type="Port" 
    Display="always" 
    Required="true" 
    Mask="false"/>

  <Config 
    Name="Web UI Port" 
    Target="4097" 
    Default="4097" 
    Mode="tcp" 
    Description="Optional web UI port (only used if ENABLE_WEB_UI=true)" 
    Type="Port" 
    Display="always" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Config" 
    Target="/home/opencode/.config/opencode" 
    Default="/mnt/user/appdata/opencode/config" 
    Mode="rw" 
    Description="Configuration files (opencode.json, auth.json, agents, commands)" 
    Type="Path" 
    Display="always" 
    Required="true" 
    Mask="false"/>

  <Config 
    Name="Data" 
    Target="/home/opencode/.local/share/opencode" 
    Default="/mnt/user/appdata/opencode/data" 
    Mode="rw" 
    Description="Data files (session history, logs)" 
    Type="Path" 
    Display="always" 
    Required="true" 
    Mask="false"/>

  <Config 
    Name="State" 
    Target="/home/opencode/.local/state/opencode" 
    Default="/mnt/user/appdata/opencode/state" 
    Mode="rw" 
    Description="State files" 
    Type="Path" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Cache" 
    Target="/home/opencode/.cache/opencode" 
    Default="/mnt/user/appdata/opencode/cache" 
    Mode="rw" 
    Description="Cache files (can be cleared safely)" 
    Type="Path" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="SSH Keys" 
    Target="/home/opencode/.ssh" 
    Default="/mnt/user/appdata/opencode/ssh" 
    Mode="rw" 
    Description="SSH keys for git operations (optional)" 
    Type="Path" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Projects" 
    Target="/projects" 
    Default="/mnt/user/projects" 
    Mode="rw" 
    Description="Directory containing your project files for AI-assisted coding" 
    Type="Path" 
    Display="always" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="PUID" 
    Target="PUID" 
    Default="99" 
    Mode="" 
    Description="User ID for file permissions" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="PGID" 
    Target="PGID" 
    Default="100" 
    Mode="" 
    Description="Group ID for file permissions" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Timezone" 
    Target="TZ" 
    Default="Etc/UTC" 
    Mode="" 
    Description="Container timezone (e.g., America/New_York, Europe/London)" 
    Type="Variable" 
    Display="always" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="API Server Port (Internal)" 
    Target="PORT" 
    Default="4096" 
    Mode="" 
    Description="Internal port for headless API server (should match API Server Port)" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Web UI Port (Internal)" 
    Target="WEB_PORT" 
    Default="4097" 
    Mode="" 
    Description="Internal port for web UI (should match Web UI Port)" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Enable Web UI" 
    Target="ENABLE_WEB_UI" 
    Default="false|true" 
    Mode="" 
    Description="Enable the built-in web UI on WEB_PORT (in addition to headless API server)" 
    Type="Variable" 
    Display="always" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="CLI Package" 
    Target="OPENCODE_CLI" 
    Default="shuvcode|opencode" 
    Mode="" 
    Description="Which CLI to use: 'opencode' (mainline) or 'shuvcode' (enhanced fork)" 
    Type="Variable" 
    Display="always" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Extra APT Packages" 
    Target="EXTRA_APT_PACKAGES" 
    Default="" 
    Mode="" 
    Description="Space-separated list of additional apt packages to install (e.g., golang ruby lua5.4)" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Extra NPM Packages" 
    Target="EXTRA_NPM_PACKAGES" 
    Default="" 
    Mode="" 
    Description="Space-separated list of additional npm packages to install globally (e.g., typescript tsx pnpm)" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Extra PIP Packages" 
    Target="EXTRA_PIP_PACKAGES" 
    Default="" 
    Mode="" 
    Description="Space-separated list of additional pip packages to install (e.g., black ruff mypy)" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Update Check Interval" 
    Target="UPDATE_CHECK_INTERVAL" 
    Default="3600" 
    Mode="" 
    Description="How often to check for updates in seconds (3600 = 1 hour)" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Anthropic API Key" 
    Target="ANTHROPIC_API_KEY" 
    Default="" 
    Mode="" 
    Description="API key for Anthropic/Claude (optional - can also configure via /connect command)" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="true"/>

  <Config 
    Name="OpenAI API Key" 
    Target="OPENAI_API_KEY" 
    Default="" 
    Mode="" 
    Description="API key for OpenAI (optional - can also configure via /connect command)" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="true"/>

  <Config 
    Name="Google API Key" 
    Target="GOOGLE_API_KEY" 
    Default="" 
    Mode="" 
    Description="API key for Google Gemini (optional - can also configure via /connect command)" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="true"/>

  <Config 
    Name="Disable Auto-Update" 
    Target="OPENCODE_DISABLE_AUTOUPDATE" 
    Default="false|true" 
    Mode="" 
    Description="Disable automatic updates (updates only apply when no active sessions)" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>

  <Config 
    Name="Desktop UI URL" 
    Target="SHUVCODE_DESKTOP_URL" 
    Default="https://app.opencode.ai" 
    Mode="" 
    Description="URL for the desktop web UI proxy (only used when web UI is enabled)" 
    Type="Variable" 
    Display="advanced" 
    Required="false" 
    Mask="false"/>
</Container>
